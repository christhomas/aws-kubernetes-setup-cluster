version: '2'

services:
  base:
    build: .
    image: kops:latest
    volumes:
      - ./aws:/root/.aws
      - ./ssh:/root/.ssh

  kops-burning-candle:
    image: kops:latest
    depends_on:
      - base
    volumes_from:
      - base
    volumes:
      - ./kube-config/burning-candle.conf:/root/.kube/config
    environment:
      - BUCKET=burning-candle-kops-config
      - REGION=eu-west-1
      - DOMAIN=burning-candle.com
      - CLUSTER=k8s.burning-candle.com
